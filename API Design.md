## API Design for Service Provider Platform

This document outlines the API design for a platform connecting service providers with users, utilizing Node.js, Express.js, Firestore, and JWT for authentication.

### 1. Database Structure

**Firestore Collections:**

- **users:**
    - `uid` (string, auto-generated by Firebase): User's unique identifier.
    - `email` (string): User's email address.
    - `password` (string, hashed): User's password.
    - `firstName` (string): User's first name.
    - `lastName` (string): User's last name.
- **serviceProviders:**
    - `uid` (string, auto-generated by Firebase): Service provider's unique identifier.
    - `email` (string): Service provider's email address.
    - `password` (string, hashed): Service provider's password.
    - `companyName` (string): Service provider's company name.
    - `services` (array of strings): List of service IDs offered by the provider.
- **services:**
    - `id` (string, auto-generated by Firestore): Service's unique identifier.
    - `name` (string): Service name.
    - `description` (string): Detailed description of the service.
    - `price` (number): Price of the service.
    - `providerId` (string): ID of the service provider offering this service.
- **serviceRequests:**
    - `id` (string, auto-generated by Firestore): Service request's unique identifier.
    - `userId` (string): ID of the user requesting the service.
    - `serviceId` (string): ID of the service requested.
    - `status` (string): Status of the request (e.g., "pending", "accepted", "completed", "cancelled").
    - `createdAt` (timestamp): Timestamp when the request was created.

### 2. API Endpoints

#### 2.1. Service Provider Endpoints

**2.1.1. Register:**

- **Method:** POST
- **Endpoint:** `/api/serviceProviders/register`
- **Request Body:**
    - `email` (string): Service provider's email address.
    - `password` (string): Service provider's password.
    - `companyName` (string): Service provider's company name.
- **Response:**
    - `success` (boolean): True if registration was successful, false otherwise.
    - `message` (string): Success or error message.

**2.1.2. Login:**

- **Method:** POST
- **Endpoint:** `/api/serviceProviders/login`
- **Request Body:**
    - `email` (string): Service provider's email address.
    - `password` (string): Service provider's password.
- **Response:**
    - `success` (boolean): True if login was successful, false otherwise.
    - `message` (string): Success or error message.
    - `token` (string): JWT access token if login was successful.

**2.1.3. Create Service:**

- **Method:** POST
- **Endpoint:** `/api/serviceProviders/services`
- **Request Body:**
    - `name` (string): Service name.
    - `description` (string): Detailed description of the service.
    - `price` (number): Price of the service.
- **Response:**
    - `success` (boolean): True if service creation was successful, false otherwise.
    - `message` (string): Success or error message.
    - `serviceId` (string): ID of the newly created service.

**2.1.4. Edit Service:**

- **Method:** PUT
- **Endpoint:** `/api/serviceProviders/services/:serviceId`
- **Request Body:**
    - `name` (string): Updated service name.
    - `description` (string): Updated description of the service.
    - `price` (number): Updated price of the service.
- **Response:**
    - `success` (boolean): True if service update was successful, false otherwise.
    - `message` (string): Success or error message.

**2.1.5. Delete Service:**

- **Method:** DELETE
- **Endpoint:** `/api/serviceProviders/services/:serviceId`
- **Response:**
    - `success` (boolean): True if service deletion was successful, false otherwise.
    - `message` (string): Success or error message.

**2.1.6. View Services:**

- **Method:** GET
- **Endpoint:** `/api/serviceProviders/services`
- **Response:**
    - `services` (array of objects): List of services offered by the provider. Each object contains:
        - `id` (string): Service ID.
        - `name` (string): Service name.
        - `description` (string): Service description.
        - `price` (number): Service price.

#### 2.2. User Endpoints

**2.2.1. Register:**

- **Method:** POST
- **Endpoint:** `/api/users/register`
- **Request Body:**
    - `email` (string): User's email address.
    - `password` (string): User's password.
    - `firstName` (string): User's first name.
    - `lastName` (string): User's last name.
- **Response:**
    - `success` (boolean): True if registration was successful, false otherwise.
    - `message` (string): Success or error message.

**2.2.2. Login:**

- **Method:** POST
- **Endpoint:** `/api/users/login`
- **Request Body:**
    - `email` (string): User's email address.
    - `password` (string): User's password.
- **Response:**
    - `success` (boolean): True if login was successful, false otherwise.
    - `message` (string): Success or error message.
    - `token` (string): JWT access token if login was successful.

#### 2.3. Service Request Endpoints

**2.3.1. Create Service Request:**

- **Method:** POST
- **Endpoint:** `/api/serviceRequests`
- **Request Body:**
    - `serviceId` (string): ID of the service requested.
- **Response:**
    - `success` (boolean): True if service request creation was successful, false otherwise.
    - `message` (string): Success or error message.
    - `requestId` (string): ID of the newly created service request.

**2.3.2. Delete Service Request:**

- **Method:** DELETE
- **Endpoint:** `/api/serviceRequests/:requestId`
- **Response:**
    - `success` (boolean): True if service request deletion was successful, false otherwise.
    - `message` (string): Success or error message.

### 3. Authentication

- **JWT (jsonwebtoken) library:** Used for generating and verifying JWT tokens.
- **Authorization Header:** JWT tokens will be sent in the Authorization header of all requests, using the format "Bearer [token]".
- **Token Validation:** The server will verify the JWT token using the secret key stored in the environment variables.
